<!DOCTYPE html>
<html lang="pt">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../css/dashboard.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <title>Dados Transporte de Vacinas</title>
    </head>

    <body>
        <header class="navbar">
            <div class="logo">Sensi<span>Vacc</span></div>
            <Select id="dashboard">
                <option value="Dados Gerais">Dados Gerais</option>
                <option value="Caminh√£o1">Caminh√£o1</option>
                <option value="Caminh√£o2">Caminh√£o2</option>
                <option value="Caminh√£o3">Caminh√£o3</option>
                <option value="Caminh√£o4">Caminh√£o4</option>
            </Select>
            <div id="div_user"> <img src="../assets/imgs/user.png" alt="logo">
                <p id="nome_user"></p>
            </div>
            <nav>
                <a href="#" class="active">In√≠cio</a>
                <a href="../login.html" onclick="sair()">Sair</a>
            </nav>
        </header>
        <div id="cards">
            <span class="card">
                <b class="dado_card">2</b>
                <p>Ve√≠culos Pecisam de Aten√ß√£o</p>
                <i id="kpi1" class="kpi" style="color: blue" onclick="click_kp1()">üîçÔ∏é Veja Quais</i>
            </span>
            <div id="pop_up1" class="pop_up"><button onclick="fechar()" class="but_fechar">X</button>
                <div class="ocorrencia">
                    <div>Caminh√£o1</div><span>1</span> Alerta(s)
                </div>
                <div class="ocorrencia">
                    <div>Caminh√£o2</div><span>1</span> Alerta(s)
                </div>
            </div>

            <span class="card">
                <b class="dado_card">3/4</b>
                <p>dos Ve√≠culos Est√£o Ativos</p>
                <i id="kpi2" class="kpi" style="color: blue" onclick="click_kp2()">üîçÔ∏éVeja Quais</i>
            </span>
            <div id="pop_up2" class="pop_up"><button onclick="fechar()" class="but_fechar">X</button>
                <div class="ocorrencia">
                    <div>Caminh√£o1</div><span>Ativo</span>
                </div>
                <div class="ocorrencia">
                    <div>Caminh√£o2</div><span>Ativo</span>
                </div>
                <div class="ocorrencia">
                    <div>Caminh√£o3</div><span>Ativo</span>
                </div>
                <div class="ocorrencia">
                    <div>Caminh√£o4</div><span>Inativo</span>
                </div>

            </div>

            <span class="card">
                <b class="dado_card">10</b>
                <p>Alerta(s) de Temperatura Nesse Semestre</p>
                <i id="kpi3" class="kpi" style="color: red;" onclick="click_kp3()">‚ñ≤ 2 a mais que no semestre
                    anterior</i>
            </span>
            <div id="pop_up3" class="pop_up"><button onclick="fechar()" class="but_fechar">X</button>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o2</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o2</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o2</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o3</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
            </div>

            <span class="card">
                <b class="dado_card">2</b>
                <p>Alerta(s) de Temperatura Essa Semana</p>
                <i id="kpi4" class="kpi" style="color: green" onclick="click_kp4()">‚ñº1 a menos que a semana anterior</i>
            </span>
            <div id="pop_up4" class="pop_up"><button onclick="fechar()" class="but_fechar">X</button>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o1</span>
                </div>
                <div class="ocorrencia">
                    <div>xx/xx/2025</div>Ve√≠culo:<span>Caminh√£o2</span>
                </div>
            </div>

        </div>
        <div id="graficos">
            <div id="metricas">
                <span class="metrica">
                    <p>M√©tricas de Alerta:</p>
                </span>
                <span class="metrica">
                    <p>Temperatura m√°xima: <b>8¬∞C</b></p>
                </span>
                <span class="metrica">
                    <p>Temperatura m√≠nima: <b>2¬∞C</b></p>
                </span>
            </div>
            <span class="grafico"> <canvas id="barras1"></canvas> </span>
            <span class="grafico"> <canvas id="barras2"></canvas> </span>
        </div>

    </body>

    <script>
        // Verificar sess√£o do usu√°rio
        if (sessionStorage.ID_USUARIO == undefined) {
            window.location = "../login.html";
        }

        // Exibir informa√ß√µes do usu√°rio
        nome_user.innerHTML = sessionStorage.NOME_USUARIO;

        function sair() {
            sessionStorage.clear();
        }

        function click_kp1() {
            pop_up1.style.display = 'flex';
        }
        function click_kp2() {
            pop_up2.style.display = 'flex';
        }
        function click_kp3() {
            pop_up3.style.display = 'flex';
        }
        function click_kp4() {
            pop_up4.style.display = 'flex';
        }


        function fechar() {
            pop_up1.style.display = 'none';
            pop_up2.style.display = 'none';
            pop_up3.style.display = 'none';
            pop_up4.style.display = 'none';
        }

        const js_barras1 = document.getElementById('barras1');
        const js_barras2 = document.getElementById('barras2');

        new Chart(js_barras1, {
            type: 'bar',
            data: {
                labels: ['Caminh√£o1', 'Caminh√£o2', 'Caminh√£o3', 'Caminh√£o4'],
                datasets: [
                    {
                        label: 'N√∫mero de Alertas',
                        data: [2, 0, 0, 0],
                        borderWidth: 1
                    }]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Ve√≠culos'
                        },
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'N√∫mero de Alertas'
                        },
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Os 4 Ve√≠culos que Mais Emitiram Alertas Nesta Semana'
                    }
                }
            }
        });

        new Chart(js_barras2, {
            type: 'bar',
            data: {
                labels: ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho'],
                datasets: [
                    {
                        label: 'N√∫mero de alertas',
                        data: [3, 2, 2, 2, 1, 0],
                        borderWidth: 1
                    }]
            },
            options: {
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Meses'
                        },
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'N√∫mero de Alertas'
                        },
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'N√∫mero de Alertas dos Ve√≠culos no Primeiro Semestre de 2025'
                    }
                }
            }
        });
    </script>

</html>
